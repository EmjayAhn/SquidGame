# 01 데이터 탐색의 기초

## 1. 데이터 탐색의 개요

### 1) 탐색적 데이터 분석(EDA: Exploratory Data Analysis)

수집한 데이터를 다양한 방법으로 관찰하고 이해하는 과정.

본격적인 데이터 분석 전에 자료를 직관적인 방법으로 통찰하는 과정

### 2) 탐색적 데이터 분석의 필요성

- 데이터 분포 및 값을 검토함으로써 **데이터에 내재된 잠재적 문제에 대해 인식하고 해결안(데이터 재수집 등)을 도출**할 수 있다. 
- 다양한 각도에서 데이터를 살펴봄으로써 **문제정의 단계에서 인지하지 못했던 새로운 양상 및 패턴을 발견, 초기 가설을 수정하거나 새로운 가설을 수립**할 수 있다.

### 3) 분석과정 및 절차

- 분석 목적과 변수를 이해한다
- 데이터가 가진 문제점 - **결측치, 이상치 등 - 을 확인**한다
- 데이터의 분포를 확인한다. 
- 데이터의 개별 값이 **예상한 범위 분포를 가지는지 기초통계산출을 통해 확인**한다
- 데이터간의 **관계속성(상관관계 등)을 확인**한다 

### 4) 이상치 검출

이상치 발생 원인 및 이상치의 의미를 파악하는 것이 중요하다. 그 후 이상치를 어떻게 처리할지(제거, 대체, 유지 등) 판단한다.

- 이상치 검출 방법

  - 개별 데이터 관찰

    - 데이터 개별 값을 무작위로 추출하여 직접 살펴본다

  - 통계값 활용

    - 적절한 요약 통계지표(Summary Statistics)를 사용한다
      - 데이터 중심을 알기 위해 평균(mean), 중앙값(median), 최빈값(mode) 를 확인
      - 데이터 분산을 알기 위해 범위(range), 분산(variance) 등을 확인

    >  통계지표 이용 시 데이터의 특성에 유의해야 한다. 예를 들어 이상치가 존재하면 평균값이 크게 영향을 받지만 중앙값은 일관적으로 대표성을 가진다.

  - 시각화 활용

    - 확률밀도함수, 히스토그램, 점플롯, 워드클라우드, 시계열차트, 지도 등의 시각화를 통해 데이터를 확인한다

  - 머신러닝 기법 활용

    - K-means 등의 방법을 통해 이상치를 확인할 수 있다.
      - 이상치가 많은 데이터의 경우 k-means 군집화가 적절하게 이루어지지 않음

    <br><br>

## 2. 상관관계 분석

### 1) 변수 간의 상관성 분석

두 변수간에 선형적인 관계가 있는지 분석하는 방법.

두 변수는 독립적이거나 상관되어있을 수 있으며, 이 **두 변수간의 관계의 강도를 상관관계(correlation)**라고 함

- 단순상관분석(Simple Correlation Analysis): 단순히 두 변수가 어느 정도 강한 관계를 갖는지 측정
- 다중상관분석(Multiple Correlation Analysis): 3개 이상의 변수 간의 관계 강도를 측정
  - 편상관관계분석(Partial Correlation Analysis): 다중상관분석에서 다른 변수와의 관계를 고정하고 두 변수의 관계강도를 측정하는 것

### 2) 상관분석의 기본 가정

- **선형성**

  - 산점도를 통해 두 변인 X와 Y의 관계가 선형적인지 확인할 수 있다

- **동변량성**(등분산성, Homoscedasticity)

  - X의 값에 관계없이 Y의 흩어진 정도가 같은 것을 의미. (opp. 이분산성, Heteroscedasticity)

  - 특정 구간에 상관없이 값의 퍼진 정도가 일정할 때 동변량성을 띤다고 얘기하며, 반대로 퍼진 정도가 일정하지 않으면 이분산성을 띤다고 말한다.

- 두 변인의 **정규분포성**

  - X와 Y의 분포가 모집단에서 모두 정규분포를 이룸

- **무선독립표본**

  - 모집단에서 표본을 뽑을 때 확률적으로 선정됨

### 3) 상관분석 방법

- **피어슨 상관계수(Pearson Correlation Coefficient or Pearson's r)**

  - 두 변수 X, Y 간의 **선형 상관관계**를 계량화한 수치.
  - 피어슨 상관계수는 1과 -1 사이의 값을 가지며, 1은 완벽한 양의 선형 상관관계, 0은 상관관계 없음, -1은 완벽한 음의 선형 상관관계를 의미

  <br>
  $$
  p = \frac{C(x, y)}{\sigma_x\sigma_y}\\\\
  C(x,y) = Cov(x,y) = \frac{1}{n-1}\Sigma^n_{i=1}(x_i-\bar{x})(y_i - \bar{y}) : \text{표본 간의 공분산}\\
  \sigma_x: \text{표본 x의 표준편차}, ~~~~ \sigma_y: \text{표본 y의 표준편차}, ~~~~ \bar{x}, \bar{y}: \text{각각의 평균}
  $$
  

- **스피어만 상관계수(Spearman Correlation Coefficient)**

  - 데이터가 심각하게 정규분포를 벗어나거나 데이터가 서열자료인 경우에 측정할 수 있는 상관계수로, 데이터를 작은 것부터 순위를 매겨 서열 순서로 바꾼 뒤 순위를 이용해 상관계수를 구함
  - 두 변수간의 **연관관계 유무**(단순히 한 변수가 증가할 때 다른 변수가 증가하는지 감소하는지 여부)를 밝혀주며, 자료에 이상치가 있거나 표본크기가 작을 때 유용
    - $x_i, y_i $​ 는 X에서 i번째 데이터의 순위, Y에서 i번째 데이터의 순위
    - $d_i = x_i - y_i$​​, 즉 $x_i$​와  $y_i$의 순위 차이

  $$
  \eqalign{
  p &= \frac{\Sigma_i(x_i - \bar{x})(y_i - \bar{y})}{\sqrt{\Sigma_i(x_i-\bar{x})^2}\sqrt{\Sigma_i(y_i-\bar{y})^2}} \\
  &= 1 - \frac{6\Sigma d_i^2}{n(n^2 - 1)}}
  $$

  - 크기 순으로 정렬한 **두 변수의 차이가 클수록 스피어만 상관계수의 값은 커짐**. 상관계수가 1에 가까울수록 두 변수는 단조적 상관성(커지면 같이 증가)을 가지고, 0에 가까우면 상관성이 없는 것으로 판단할 수 있다
    

