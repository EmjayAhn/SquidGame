# 02 고급 데이터 탐색

## 1. 시공간 데이터 탐색

### 1) 시공간 데이터의 개념

**공간적 정보에 시간의 흐름이 결합된 다차원 데이터**를 의미함.

#### (1) 시간 데이터

- **유효 시간**: 데이터가 발생하거나 소멸된 시간
- **거래 시간**: 관리시스템을 통해 처리된 시간
- **사용자 정의 시간**: 유효 시간이나 거래 시간이 없는 경우 사용자가 정의한 시간
- **스냅샷 데이터**: 시간개념이 필요하지 않아서 거래/유효시간 미지원
- **거래시간 데이터 / 유효시간 데이터**: 각각 거래시간, 유효시간만 지원
- 이원 시간 데이터: 거래시간, 유효시간 모두를 지원

<br>

#### (2) 공간 데이터

- **비공간 타입**: 기본적인 데이터 유형을 가진 속성
- **래스터 공간 타입**: 실세계에 존재하는 객체의 이미지 (그리드에서 픽셀로 표현됨)
- **벡터 공간 타입**: 점, 선, 면 등의 요소로 구성
- **기하학적 타입**: 벡터 타입의 요소로부터 거리, 면적, 길이 등과 같은 유클리드 기하학 계산 값으로 표현
- **위상적 타입**: 공간 객체 간의 관계. 방위, 공간객체간의 중첩, 포함, 교차, 분리 등과 같은 위치적 관계로, 보통 처리 시 대량의 공간을 필요로 하기 때문에 따로 저장되지 않고 필요 시에 공간객체로부터 동적으로 계산한다.

<br>

#### (3) 공간 데이터 모델

- **관계형 모델**: 데이터의 표현이 유연하지 못하며 실세계 공간의 객체 특징을 적절히 표현하지 못하는 문제점이 있음.
- **객체지향 모델**
  - 비구조적이고 복잡한 데이터를 잘 표현한다
  - 데이터 계층 구조를 이용한 연산이 쉽다
  - 새로운 함수 확장이 쉽다
  - 데이터 무결성 검사가 쉽다
  - 설계 단계와 구현단계 모델 사이의 불일치 문제를 줄인다

<br>

#### (4) 시공간 데이터

시간 데이터와 공간 데이터의 결합 형태. 

> 기본적으로 위치, 영역 등의 공간 정보는 시간의 흐름에 다라 변화하므로 실제 객체들은 공간적 정보와 시간적 정보 모두와 연관이 있다.



<br>

### 2) 시공간 데이터 분석

#### (1) 시공간 데이터에 대한 질의어

시공간자료는 정의언어와 조작언어로 구분한다.

- 시공간자료 **정의언어**: 시공간 테이블 인덱스 및 뷰의 정의문, 변경문 등. 공간적 속성과 시간적 속성을 동시에 포함하며 점, 선, 면 등의 공간속성 타입이 추가되어 있다.
- 시공간자료 **조작언어**: 객체의 삽입, 삭제, 변경 등의 검색문. 시간지원 연산자와 공간 연산자를 포함하여, 이를 통해 객체에 대한 공간관리와 이력정보를 제공함.

#### (2) 시공간 데이터의 연산

- **시공간위상 관계연산**

  두 객체 간 시공간영역상의 관계에 대해 참/거짓을 반환하는 연산. 

  대표적으로 교차(intersection) 연산자는 공간관계의 경우 선과 선의 교차, 선과 면의 교차 여부를 반환하며, 시간관계의 경우 두 객체의 유효시간 정보를 기반으로 선후관계를 평가하여 참/거짓을 반환한다.

- **시공간기하 연산**

  공간기하 연산자 + 시간구성 연산자 결합으로 표현. 두 객체간의 거리(distance) 연산을 지칭한다.

#### (3) 적용 및 응용분야

시공간 데이터 기술은 지리정보시스템, 위치기반 서비스, 차량 위치추적 서비스 등에 활용된다.

<br>

<br>

## 2. 다변량 데이터 탐색

다변량 데이터 탐색은 기본적으로 변수들간 인과관계의 규명과 분석을 하는 것이다.

변수들 간의 상관관계를 이용하여 변수를 축약하거나, 개체들을 분류하고 관련된 분석방법들을 동원해 분석하는 것.

<br>

### 1) 종속변수와 독립변수 사이의 인과 관계

#### (1) 다중회귀(Multiple Regression)

**독립변수가 2개 이상인 회귀모형**을 지칭하며, <u>각 독립변수는 종속변수와 선형관계에 있음을 가정</u>한다.

- 장점

  - 변수를 추가하여 분석내용의 질적 향상을 도모할 수 있다. (단순회귀분석의 단점 극복)
  - 독립변수가 여럿일 때 단순회귀모형을 선택하면 변수가 누락됨으로써 계수 추정량에 대한 bias가 야기되는데 이를 제거할 수 있다.

- 일반 형식

  - k개의 독립변수가 종속변수 Y를 설명한다.
    $$
    Y = \alpha_1 X_1 + \alpha_2 X_2 + \cdots + \alpha_k X_k + \beta + \epsilon_k
    $$
    추정해야 할 모수는 $\alpha_i$ k개(기울기), $\beta$(절편) 까지 총 k + 1개이다.

    <br>

- 기본 가정

  - 회귀모형은 모수에 대해 선형인 모형이다.
  - 오차항의 평균은 0이다.
  - 오차항의 분산은 모든 관찰치에 대해 $\sigma^2$ 의 일정한 분산을 갖는다.
  - 각 오차항은 서로 독립이며 공분산은 0이다.
  - 각 독립변수 역시 서로 독립니다.
  - 오차항은 정규분포를 따르며 $N(0, \sigma^2)$ 이다.

  <br>

- 분석 방법

  최소자승법을 이용해 결과를 도출할 수 있다.

<br>

#### (2) 로지스틱 회귀(Logistic Regression)

종속변수가 이항형일 때 사용된다.

- 특징

  - 선형모델과의 차이점

    - 이항형인 데이터에 적용하였을 때 y의 결과가 범위 [0,1]로 제한된다.
    - 종속변수가 이진적이기 때문에 조건부 확률 $P(y|x)$​​ 의 분포가 정규분포가 아닌 이항분포를 따른다.

    $$
    G(x) = \frac{e^x}{1 + e^x} ~~ : \text{로지스틱 모형 함수(시그모이드 함수)}
    $$

  - 종속변수의 형태는 연속변수 또는 이산변수로 구분된다. 

<br>

#### (3) 분산분석(ANOVA: Analysis of Variance)

3개 이상의 표본 집단 간의 차이를 <u>표본평균 간의 분산과 표본 내의 관측치 간 분산을 비교</u>하여 가설을 검정하는 것이다. 

![image-20211122221816011](/Users/jeon-yujin/Library/Application Support/typora-user-images/image-20211122221816011.png)

<center>[이미지 출처:https://www.tibco.com/ko/reference-center/what-is-analysis-of-variance-anova]</center>

<br>

분산분석 시에는 다음 3가지 가정을 전제로 한다.

1. 정규성 가정

   - 각 모집단에서 종속변수 Y는 정규분포를 따른다. 각 집단별 Y의 평균은 다를 수 있다.

2. 분산의 동질성 가정

   - Y의 모집단 분산은 각 집단별로 동일하다.

3. 관찰의 독립성 가정

   - 각 모집단에서 표본들은 독립적으로 추출된다.

   <br>


- **일원분산분석(One-Way ANOVA)**

  하나의 변인에 의해 발생하는 여러 표본집단간 평균 차이를 검정

  - **독립변수 1개**, **종속변수 1개**
  - 종속변수와 정수값을 갖는 요인변수가 하나씩 정의되어야 한다.

  ex) 3개 학급(A, B, C) 간 담임선생님 담당과목(독립변수)에 따른 성적(종속변수)의 평균 차이

  <br>

#### (4)다변량 분산분석(Multi Variate ANOVA)

여러 개의 변인에 의해 발생하는 여러 표본집단간 평균 차이를 검정

- **이원분산분석(Two-Way ANOVA)**

  - **독립변수 2개**, **종속변수 1개**

  ex) 3개 학급(A, B, C) 간 담임선생님 담당과목(독립변수1)과 학생들의 성비(독립변수2)에 따른 성적(종속변수)의 평균 차이

- **다원변량분산분석**

  - **독립변수 1개**, **종속변수 2개**

    ex) 3개 학급(A, B, C) 간 담임선생님 담당과목(독립변수)에 따른 성적(종속변수1)과 학생만족도(종속변수2)의 평균 차이

  - **독립변수 2개**, **종속변수 2개**

    ex) 3개 학급(A, B, C) 간 담임선생님 담당과목(독립변수1)과 학생들의 성비(독립변수2)에 따른 성적(종속변수1)과 학생만족도(종속변수2)의 평균 차이

    <br>

> **ANOVA 더 알아보기**
>
> 실험 예) 다양한 당뇨병 약물의 효과를 연구할 목적으로 약물 유형과 그에 따른 혈당 수치 사이의 관계를 설정하고 실험하여 조사합니다. 표본 집단은 사람들의 집합입니다. 샘플 모집단을 여러 그룹으로 나누고 각 그룹은 시험 기간 동안 특정 의약품을 투여받습니다. 시험 기간이 끝나면 각 대상자의 혈당 수치를 측정합니다. 그런 다음 각 그룹에 대해 평균 혈당 수치를 계산합니다. <u>ANOVA는 F-검정을 통해 이러한 그룹간 평균이 통계적으로 다른지 또는 유사한 지 검정</u>합니다. 
>
> <u>ANOVA의 결과는 'F 통계량'</u>입니다. F 통계량은 두 분산의 비율을 의미하며, 일원분산분석의 경우 다음과 같이 계산됩니다.
> $$
> F = \frac{\text{표본 평균 간 변동}}{\text{표본 내 변동}}
> $$
> 즉 F통계량은 그룹 내 분산과 그룹 간 분산 간의 차이를 보여주며, 궁극적으로 귀무 가설(그룹 평균 사이에 차이가 없다)이 지지되거나 기각된다는 결론을 내릴 수 있는 그림을 생성합니다. <u>그룹간에 유의한 차이가 있는 경우 귀무 가설이 기각되며 F 통계량 값은 커집니다</u>.
>
> 각 그룹의 평균값이 달라도 이는 독립 변수(약물종류)가 종속 변수(혈당수치)에 미치는 영향이 아니라 표본샘플링 오류 때문일 수 있습니다. 샘플링 오류로 인한 경우 그룹 평균 간의 차이는 의미가 없습니다. ANOVA를 사용하여 평균값의 차이가 통계적으로 유의한지 확인할 수 있습니다. 즉, <u>ANOVA는 독립 변수가 종속 변수에 영향을 미치는지를 간접적으로 보여줍니다</u>. 위의 혈당 수준 실험에 대한 ANOVA 검정결과 그룹 평균이 통계적으로 유의하지 않고 그룹 평균 간의 차이가 샘플링 오류 때문이라는 것을 발견했다면, 약물의 유형(독립 변수)이 혈당 수치에 영향을 미치는 중요한 요소가 아니라는 것을 추론하게 됩니다.
>
> ANOVA는 <u>최소 두 그룹의 평균간에 유의한 차이가 있는지 여부만 알 수 있지만 어떤 쌍에서 평균이 다른지는 설명할 수 없습니다</u>. 평균값이 다른 그룹을 찾아내기 위해서는 다른 통계 방법을 함께 사용해야 합니다.
>
> ANOVA를 통해 독립 변수가 목표 변수에 영향을 미치는지 확인할 수 있으며, 그에 따라 입력 변수의 수를 최소화하여 모델의 복잡성을 줄일 수 있습니다.
>
> 출처: https://www.tibco.com/ko/reference-center/what-is-analysis-of-variance-anova,
> https://blog.minitab.com/ko/adventures-in-statistics-2/understanding-analysis-of-variance-anova-and-the-f-test

<br>

### 2) 변수 축약

변수들간의 상관관계를 이용하여 변수를 줄이는 방법으로 변수유도기법이라고도 함.

#### (1) 주성분분석(PCA: Principal Component Analysis)

- 다변량자료에서 존재하는 비정규성(abnormality)이나 이상치(outlier)를 발견하기 위해 

